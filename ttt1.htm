<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
</head>
<body>
    <input type="file" id="file">
  <br>
<input type="" name="snapshot_base64" id="snapshot_base64">
    <script type="text/javascript">
        $(function(){
            var url = 'https://script.google.com/macros/s/AKfycbynGbSCtjCbb4qpKTLyCXfGOYeEzjxKk1HKcao_7js8NUNIjkk/exec';
            var params = {
                filename: 'samplefile',
                imageformat: 'PNG'
            };

            $('#file').on("change", function() {
                var file = this.files[0];
                var fr = new FileReader();
                fr.onload = function(e) {
                    params.file = e.target.result.replace(/^.*,/, '');
                  console.log("tt");
                  snapshot_input = document.getElementById('snapshot_base64');
snapshot_input.setAttribute('value', params.file);
                  
                    postJump();
                }
                fr.readAsDataURL(file);
            });

            function postJump(){
                var html = '<form method="post" action="'+url+'" id="postjump" style="display: none;">';
                Object.keys(params).forEach(function (key) {
                    html += '<input type="hidden" name="'+key+'" value="'+params[key]+'" >';
                });
                html += '</form>';console.log("tt=",html);
                $("body").append(html);
                $('#postjump').submit();
                $('#postjump').remove();
            }
        });
    </script>
</body>
</html>
