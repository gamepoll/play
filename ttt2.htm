<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<button id="button">KQJ Me</button>
<br>
<button id="button_odds">Odd Me</button>
<button id="button_brown">Brown Me</button>
<button id="button_brown2">Brown Me2</button>
<button id="button_info">Info Me</button>
<button id="button_convert">Convert Me</button>
<table id="w">
  <tr>
    <td>
      <input type="text" id="race1K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race2K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race3K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race4K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race5K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race6K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race7K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race8K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race9K" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race10K" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race11K" size="6" value="" />
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" id="race1Q" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race2Q" cat="pp" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race3Q" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race4Q" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race5Q" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race6Q" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race7Q" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race8Q" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race9Q" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race10Q" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race11Q" size="6" value="" />
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" id="race1J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race2J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race3J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race4J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race5J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race6J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race7J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race8J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race9J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race10J" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race11J" size="6" value="" />
    </td>
  </tr>
  <tr>
    <td>
      <input type="text" id="race1T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race2T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race3T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race4T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race5T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race6T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race7T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race8T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race9T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race10T" size="6" value="" />
    </td>
    <td>
      <input type="text" id="race11T" size="6" value="" />
    </td>
  </tr>
</table>
<div id="sector_front">
  <input type="button" id="race1K" cat="pk" value="ppp...kkk" />
  <input type="button" id="race2K" cat="pk" value="ppp...kkk" /></div>
<button id="pairsfromcloud">dnload pairs fm cloud</button>

<input type="button" id="test-typing" value="6185...776" />
<input type="button" id="test-typing" value="700...9988" />
<br />
<button id="savebase">save base-KQJ</button>
<button id="uptocloud">upload to cloud-KQJ</button>
<button id="backfromcloud">dnload KQJ fm cloud</button>
<br />
<input id="text3" value="0388" style="width: 150px;" />
<br />
<input id="text3a" value="03881" style="width: 150px;" />

<script>
$("#backfromcloud").click(function () {
  // console.log("myvalue=",$(this).val());
  $.getJSON(
    "https://jsonblob.com/api/jsonBlob/821851da-d2a5-11ea-96d2-93752e24e800",
    function (posts) {
      for (var i = 2; i < posts.queue.length; i++) {
        $('input[cat="pp"]').each(function () {
          var id = $(this).attr("id");
          if (id == posts.queue[i].key) {
            var value = posts.queue[i].name;
            $(this).val(value);
          }
        });
      }
    }
  );
});
/////////////////////////////////////////////////////
$("#pairsfromcloud").click(function () {
  // console.log("myvalue=",$(this).val());
  $.getJSON(
    "https://jsonblob.com/api/jsonBlob/821851da-d2a5-11ea-96d2-93752e24e800",
    function (posts) {
      for (var i = 2; i < posts.queue.length; i++) {
        $('input[cat="pk"]').each(function () {
          var id = $(this).attr("id");
          if (id == posts.queue[i].key) {
            var value = posts.queue[i].name;
            $(this).val(value);
          }
        });
      }
    }
  );
});
/////////////////////////////////////////////////////
/*<div id="sector_front">	
    <input type="button" id="test-typing" value="6185...776" />
    <input type="button" id="test-typing" value="700...9988" />
</div> 
*/
$("#sector_front").on("click", "input", function () {
  //  console.log("myvalue=",$(this).val());
  var res = $(this)
    .val()
    .split(/\.\.\./g);
  $("#text3").val(res[0]);
  $("#text3a").val(res[1]);
});
/////////////////////////////////////////////////////

$("#test-typing").click(function () {
  //console.log("myvalue=",$(this).val());
  //     var regegg = new RegExp(".*?!!!","i");
  $(this).val("kk" + "..." + "bbb");
  //     var res = $(this).val().match(regegg);
  var res = $(this)
    .val()
    .split(/\.\.\./g);

  console.log("res=", res[0]);
  console.log("res1=", res[1]);
  //      console.log("kk=",$(this).val().indexOf("..."));
});
// https://stackoverflow.com/questions/12001953/javascript-and-regex-split-string-and-keep-the-separator
/////////////////////////////////////////////////////
$("#savebase").click(function () {
  var updatedObj = {
    queue: [
      { key: "1088", key2: "1088", name: "Banana" },
      { key: "1099", key2: "1088", name: "Orange" }
    ]
  };
  var updatedData = JSON.stringify(updatedObj);

  // do update
  $.ajax({
    url:
      "https://jsonblob.com/api/jsonBlob/821851da-d2a5-11ea-96d2-93752e24e800",
    type: "PUT",
    data: updatedData,
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (data, textStatus, jqXHR) {
      var json = JSON.stringify(data);
    }
  });
});
/////////////////////////////////////////////////////
$("#uptocloud").click(function () {
  $.getJSON(
    "https://jsonblob.com/api/jsonBlob/821851da-d2a5-11ea-96d2-93752e24e800",
    function (posts) {
      // posts => LS
      localStorage.setItem("lsposts", JSON.stringify(posts));

      // LS => jsonArray
      jsonArray2 = JSON.parse(localStorage.getItem("lsposts"));

      // jsonArray2 += newjson
      $('input[type="text"]').each(function () {
        jsonArray2.queue.push({
          key: $(this).attr("id"),
          name: $(this).val(),
          key2: "//"
        });
      });
      // do update
      $.ajax({
        url:
          "https://jsonblob.com/api/jsonBlob/821851da-d2a5-11ea-96d2-93752e24e800",
        type: "PUT",
        data: JSON.stringify(jsonArray2),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data, textStatus, jqXHR) {
          var json = JSON.stringify(data);
        }
      });
    }
  );
});
/////////////////////////////////////////////////////

</script>
